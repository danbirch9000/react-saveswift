const utils = require("../../utils");
const moment = require("moment");
const uuidv4 = require("uuid/v4");

const buildData = ({yearRange, intervals, incrementRange}) => {
  const start = moment().subtract(yearRange, "years");
  const daysDiff = moment().diff(start, "days");
  const dayInterval = Math.floor(daysDiff/intervals);
  let deposits = 0;
  let history = {};
  [...Array(intervals)].forEach((i,x) => {
    const inc = utils.getRandomArbitrary(incrementRange[0], incrementRange[1]);
    deposits = deposits + (deposits * 0.02) + inc;
    history[uuidv4()] = {
      date: moment().subtract(yearRange, "years").add(x*dayInterval, "days").format(),
      value: deposits.toFixed(2)
    };
  });
  return history;
};

const payload = {
  [uuidv4()]: {
    history: buildData({
      yearRange: 10,
      intervals: 60,
      incrementRange: [300, 850]
    }),
    name: "Account 1"
  },
  [uuidv4()]: {
    history: buildData({
      yearRange: 5,
      intervals: 28,
      incrementRange: [400, 450]
    }),
    name: "Account 2"
  },
  [uuidv4()]: {
    history: buildData({
      yearRange: 2,
      intervals: 15,
      incrementRange: [500, 750]
    }),
    name: "Account 3",
  }
};

const preGeneratedPayload = {"e31fdc84-1ab0-4e91-a64a-fa6b096aeaad":{"history":{"0817d541-061e-4a27-ace8-3685b47b9428":{"date":"2010-02-12T08:17:04+00:00","value":"333.00"},"785e0cb8-8dfc-4e1f-9c9d-4863b09e1c27":{"date":"2010-04-13T08:17:04+01:00","value":"723.66"},"fbb9157d-ca4a-4b05-9fc2-5b0b7474fd14":{"date":"2010-06-12T08:17:04+01:00","value":"1373.13"},"28070615-4f9c-4222-ad8a-4a73df1d1dda":{"date":"2010-08-11T08:17:04+01:00","value":"1931.60"},"3c7c2bb9-9bb1-48e4-9bff-afc08620fa25":{"date":"2010-10-10T08:17:04+01:00","value":"2719.23"},"869a35bb-8aa0-43a5-908e-72ad942cb456":{"date":"2010-12-09T08:17:04+00:00","value":"3439.61"},"71c30166-5343-4f24-a6ac-565f7083e0b8":{"date":"2011-02-07T08:17:04+00:00","value":"4215.40"},"c4c66427-eb36-4c9c-a79b-3c5a96e2b991":{"date":"2011-04-08T08:17:04+01:00","value":"4770.71"},"8ee4df3e-652b-45ed-8699-df57ec70feb1":{"date":"2011-06-07T08:17:04+01:00","value":"5415.13"},"de6efc3d-601b-40ba-904d-54c6c11133a3":{"date":"2011-08-06T08:17:04+01:00","value":"5873.43"},"dda7fd73-32c1-4995-9802-29813aa3e642":{"date":"2011-10-05T08:17:04+01:00","value":"6821.90"},"35021eb1-2df6-475b-877c-2b378177b48c":{"date":"2011-12-04T08:17:04+00:00","value":"7487.34"},"0f3b8958-288f-448a-9395-be855efda0f1":{"date":"2012-02-02T08:17:04+00:00","value":"8058.08"},"dc86b5d5-c792-4bcc-933e-c74dd9284984":{"date":"2012-04-02T08:17:04+01:00","value":"8673.24"},"727b9a97-de33-466a-b37c-6c97ac101856":{"date":"2012-06-01T08:17:04+01:00","value":"9184.71"},"0e88a8b3-052e-40e1-8635-ba4b8bfca997":{"date":"2012-07-31T08:17:04+01:00","value":"9697.40"},"57a70ec4-7b12-486d-ab1f-066d4c6d0ef8":{"date":"2012-09-29T08:17:04+01:00","value":"10544.35"},"b43267f4-2c94-43a6-8dd6-732458fc8889":{"date":"2012-11-28T08:17:04+00:00","value":"11323.24"},"6c1013e4-b45f-4c07-b7f0-698151d42441":{"date":"2013-01-27T08:17:04+00:00","value":"12057.70"},"e41ed843-d7a6-4fce-8d64-49c754522012":{"date":"2013-03-28T08:17:04+00:00","value":"12625.86"},"90c203cb-48b4-4d75-a707-be3f35a75a52":{"date":"2013-05-27T08:17:04+01:00","value":"13485.37"},"e475adce-6f55-4adf-a291-c67fde2958be":{"date":"2013-07-26T08:17:04+01:00","value":"14233.08"},"5200810d-4b25-432c-9885-0b43413bb43e":{"date":"2013-09-24T08:17:04+01:00","value":"14908.74"},"19b65903-a80c-4ac1-bbf9-3be5421b5411":{"date":"2013-11-23T08:17:04+00:00","value":"15595.92"},"a2c7fd81-fb9d-4338-9e4b-eaa1746bcc4c":{"date":"2014-01-22T08:17:04+00:00","value":"16407.84"},"c918c245-3d35-43aa-9fa5-5ae9a512a367":{"date":"2014-03-23T08:17:04+00:00","value":"17422.99"},"1a55cfb9-5843-4346-9436-f7b7eb9441f5":{"date":"2014-05-22T08:17:04+01:00","value":"18585.45"},"1b47fef1-de7f-4bc0-be6e-8be12950d14e":{"date":"2014-07-21T08:17:04+01:00","value":"19752.16"},"b97f9aab-4c05-47ce-9e62-6a54e5fa1435":{"date":"2014-09-19T08:17:04+01:00","value":"20577.21"},"a6523665-b9bb-46c1-9fdf-d4a13f997917":{"date":"2014-11-18T08:17:04+00:00","value":"21356.75"},"e36eba61-9d14-4400-97ab-f714813a8496":{"date":"2015-01-17T08:17:04+00:00","value":"22266.88"},"1bbc554d-7bbd-4d59-98ac-f25c9d1e5da0":{"date":"2015-03-18T08:17:04+00:00","value":"23251.22"},"1c6cae2e-bccd-458f-ad91-ce439f0d9088":{"date":"2015-05-17T08:17:04+01:00","value":"24161.25"},"38821e24-fd89-4924-afde-08488e78f0b1":{"date":"2015-07-16T08:17:04+01:00","value":"25425.47"},"4e41ed88-f920-4226-a45c-f8071f9f0675":{"date":"2015-09-14T08:17:04+01:00","value":"26461.98"},"5b377e20-968c-452d-8e1f-edf20b187649":{"date":"2015-11-13T08:17:04+00:00","value":"27490.22"},"a2db22af-c72f-4fbd-bdc2-e3aa387e05ea":{"date":"2016-01-12T08:17:04+00:00","value":"28748.03"},"fb75a088-cae1-4474-b37d-68ec4faefcdc":{"date":"2016-03-12T08:17:04+00:00","value":"29640.99"},"830cb327-f8ab-4fa8-b01f-88a86ef78e37":{"date":"2016-05-11T08:17:04+01:00","value":"30732.81"},"65813297-4821-451e-9c07-a54925cd0649":{"date":"2016-07-10T08:17:04+01:00","value":"31705.46"},"1f99f00d-98ec-4a23-8412-3b2bcf9f9319":{"date":"2016-09-08T08:17:04+01:00","value":"32716.57"},"9d4d6516-9fa9-438f-bcde-1cf85d4864f3":{"date":"2016-11-07T08:17:04+00:00","value":"33727.90"},"7e0e419e-e36b-4f3c-aa11-6719d2639148":{"date":"2017-01-06T08:17:04+00:00","value":"34873.46"},"10b985fb-d17a-4baa-9294-503aeadf73a8":{"date":"2017-03-07T08:17:04+00:00","value":"36017.93"},"a24484b3-608e-492f-b0be-c051e40999bc":{"date":"2017-05-06T08:17:04+01:00","value":"37496.29"},"ef40ea57-65e4-448b-a315-51ace4e1c748":{"date":"2017-07-05T08:17:04+01:00","value":"38727.21"},"97ac6134-6487-4e34-b226-25194632bfdd":{"date":"2017-09-03T08:17:04+01:00","value":"40267.76"},"b41b18f5-2ee6-49ff-bbd8-7cbb5427ebf1":{"date":"2017-11-02T08:17:04+00:00","value":"41447.11"},"55579f10-c89d-4f28-a1ff-95aa2248a059":{"date":"2018-01-01T08:17:04+00:00","value":"42686.06"},"7df852f9-a0e5-4e95-9035-cf3a239e2c20":{"date":"2018-03-02T08:17:04+00:00","value":"44141.78"},"cfa86d53-84ba-4b86-bc4c-9aba6d6d842c":{"date":"2018-05-01T08:17:04+01:00","value":"45731.61"},"bb73d832-3d4f-4e96-adf9-0d83117ee2af":{"date":"2018-06-30T08:17:04+01:00","value":"47020.24"},"a713329e-efe2-4b65-83f7-e4312f04291c":{"date":"2018-08-29T08:17:04+01:00","value":"48683.65"},"aff53cf8-1250-449b-9d35-895c8ac6d9e7":{"date":"2018-10-28T08:17:04+00:00","value":"50199.32"},"752136aa-b249-43ed-90f0-f38ffa30683a":{"date":"2018-12-27T08:17:04+00:00","value":"51972.31"},"e3f63314-1bf6-4c58-8602-521773cef386":{"date":"2019-02-25T08:17:04+00:00","value":"53313.76"},"713af9dc-6705-4c34-99d8-ae9aa39ad160":{"date":"2019-04-26T08:17:04+01:00","value":"55209.03"},"4b3c5e98-eaba-4f90-81be-93bb42b2836b":{"date":"2019-06-25T08:17:04+01:00","value":"56782.21"},"2629f046-38fb-492d-8340-709f92054c2d":{"date":"2019-08-24T08:17:04+01:00","value":"58500.86"},"9e52b161-e156-4cae-a92c-ac6918225d02":{"date":"2019-10-23T08:17:04+01:00","value":"60089.87"}},"name":"Account 1"},"0c4e53e1-2b13-44cc-b565-626456d55501":{"history":{"8a6e4bea-d366-4b1b-abf0-1c0afcffda26":{"date":"2015-02-12T08:17:04+00:00","value":"410.00"},"3a0bdbb6-03be-4498-905a-ce6c3889a321":{"date":"2015-04-18T08:17:04+01:00","value":"833.20"},"5c8d37a8-48a5-48b8-b58e-ecc7d8205d36":{"date":"2015-06-22T08:17:04+01:00","value":"1296.86"},"5f2e9fff-f134-4283-8f79-a4c41740b6e2":{"date":"2015-08-26T08:17:04+01:00","value":"1766.80"},"4da6dbb8-7be3-4120-9262-574033b1ac72":{"date":"2015-10-30T08:17:04+00:00","value":"2238.14"},"9837edb4-915d-402e-a4c9-19bbf4dbd742":{"date":"2016-01-03T08:17:04+00:00","value":"2729.90"},"5ca055d5-dde8-4898-bce0-b182b278b789":{"date":"2016-03-08T08:17:04+00:00","value":"3184.50"},"1699d153-fccf-4003-aa01-6f5ee27a0d45":{"date":"2016-05-12T08:17:04+01:00","value":"3686.19"},"ae326691-b990-4876-86bb-a4c2ee162235":{"date":"2016-07-16T08:17:04+01:00","value":"4182.91"},"85db4869-0d37-4797-a8a1-4f70f41c9a76":{"date":"2016-09-19T08:17:04+01:00","value":"4671.57"},"a065e8a0-e285-4563-988d-7b22e7b87832":{"date":"2016-11-23T08:17:04+00:00","value":"5190.00"},"3d54e80f-b442-4d74-8091-b83c732f44cb":{"date":"2017-01-27T08:17:04+00:00","value":"5705.80"},"36ae6604-14ef-467c-9e3b-6e63b9869370":{"date":"2017-04-02T08:17:04+01:00","value":"6266.92"},"d31e7a5b-1d3d-4d9b-8ba3-fe724dffff3e":{"date":"2017-06-06T08:17:04+01:00","value":"6833.26"},"eb3ad540-abfb-4f55-acc3-8ee789a7d302":{"date":"2017-08-10T08:17:04+01:00","value":"7407.92"},"00e4e53e-9c8f-47ab-b01b-75aadd855c62":{"date":"2017-10-14T08:17:04+01:00","value":"7978.08"},"be303b52-279f-4cd2-8172-31c98531e5fd":{"date":"2017-12-18T08:17:04+00:00","value":"8563.64"},"e54706ac-bad5-4839-a336-4ddc3408118e":{"date":"2018-02-21T08:17:04+00:00","value":"9153.91"},"4715fcf5-bc52-4a7c-9d7e-588f58deb24f":{"date":"2018-04-27T08:17:04+01:00","value":"9755.99"},"59965781-a8db-46b1-a042-506905521f65":{"date":"2018-07-01T08:17:04+01:00","value":"10358.11"},"75255b71-cab7-464f-8ed6-646f4848fc92":{"date":"2018-09-04T08:17:04+01:00","value":"11006.27"},"db914270-31bb-4c19-b528-bbde843b3b6e":{"date":"2018-11-08T08:17:04+00:00","value":"11648.40"},"3e8b9a77-1495-4845-8fe9-7673331a989d":{"date":"2019-01-12T08:17:04+00:00","value":"12289.37"},"3d5056f1-5e62-4f53-b9a5-a95e34ed0c9e":{"date":"2019-03-18T08:17:04+00:00","value":"12983.15"},"72ede429-85c5-42bd-8c2a-803beef0e4da":{"date":"2019-05-22T08:17:04+01:00","value":"13660.82"},"2fef4b6a-ee42-4ed2-a4ea-159e609139a2":{"date":"2019-07-26T08:17:04+01:00","value":"14383.03"},"9e9a9bb8-9b46-44c0-8368-458dd12fd4a7":{"date":"2019-09-29T08:17:04+01:00","value":"15103.70"},"1be27228-3491-4bbd-8309-3bed4642001d":{"date":"2019-12-03T08:17:04+00:00","value":"15847.77"}},"name":"Account 2"},"20d8cfca-0c3b-4008-96bc-a2576013d011":{"history":{"b50187a3-22cf-4505-b80d-cc8399af571d":{"date":"2018-02-12T08:17:04+00:00","value":"585.00"},"27e8c98d-dec6-40d0-97ff-a0beb132b688":{"date":"2018-04-01T08:17:04+01:00","value":"1270.70"},"822743ca-5626-494e-a0a9-9de44ab5d265":{"date":"2018-05-19T08:17:04+01:00","value":"1984.11"},"e15f93fd-4c78-4b16-8020-846beafb79e7":{"date":"2018-07-06T08:17:04+01:00","value":"2612.80"},"fb349134-16a3-4af0-aece-04687d63f83b":{"date":"2018-08-23T08:17:04+01:00","value":"3353.05"},"4b3b303a-0d47-4c5a-a964-5f838bc27a34":{"date":"2018-10-10T08:17:04+01:00","value":"4092.11"},"8a5a1de5-932f-40bd-aa4e-9e50e408cbbb":{"date":"2018-11-27T08:17:04+00:00","value":"4829.96"},"f0499c23-d8e7-4251-8644-bda7b72236ca":{"date":"2019-01-14T08:17:04+00:00","value":"5671.55"},"f2291430-56cf-4a53-abd6-1432bbe9d205":{"date":"2019-03-03T08:17:04+00:00","value":"6355.99"},"b1458f4a-fac7-44c6-92a9-5ee4948140e1":{"date":"2019-04-20T08:17:04+01:00","value":"7162.11"},"07ef22b9-261f-412c-abee-0ad5a53b9b13":{"date":"2019-06-07T08:17:04+01:00","value":"7938.35"},"87f775e2-6a91-44a9-b162-2917ea6a8fae":{"date":"2019-07-25T08:17:04+01:00","value":"8834.11"},"94a5d356-e6bc-4adc-aebf-7e2e2fb6b18c":{"date":"2019-09-11T08:17:04+01:00","value":"9670.80"},"08aed44a-055e-47b1-b1e4-a5e1c63de589":{"date":"2019-10-29T08:17:04+00:00","value":"10443.21"},"dbbe94ff-63a0-4a44-ac16-5e42cea3c8f1":{"date":"2019-12-16T08:17:04+00:00","value":"11201.08"}},"name":"Account 3"}};

module.exports = (request, response) => {
  setTimeout(() => {
    response.status(200).send(preGeneratedPayload);
    // response.status(404).send(payloadOneResult);
  }, utils.getRandomArbitrary(1000, 2000));
};
